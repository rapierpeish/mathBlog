import{escapeHtml as l}from"@mdit/helper";import{tex as u}from"@mdit/plugin-tex";let p=!0,n;try{n=await import("katex")}catch{/* istanbul ignore next -- @preserve */p=!1}const y=(t,o,a)=>{let r;try{r=n.renderToString(t,{...o,displayMode:!1})}catch(e){/* istanbul ignore else -- @preserve */if(e instanceof n.ParseError)console.error(e),r=`<span class='katex-error' title='${l(e.toString())}'>${l(t)}</span>`;else throw e}return a?.(r,!1)??r},S=(t,o,a)=>{let r;try{r=`<p class='katex-block'>${n.renderToString(t,{...o,displayMode:!0})}</p>
`}catch(e){/* istanbul ignore else -- @preserve */if(e instanceof n.ParseError)console.error(e),r=`<p class='katex-block katex-error' title='${l(e.toString())}'>${l(t)}</p>
`;else throw e}return a?.(r,!0)??r},$=(t,o={})=>{/* istanbul ignore if -- @preserve */if(!p)throw new Error('[@mdit/plugin-katex-slim]: "katex" is not installed!');const{allowInlineWithSpace:a=!1,delimiters:r,mathFence:e,logger:m=s=>s==="newLineInDisplayMode"?"ignore":"warn",macros:d={},transformer:i,...f}=o;t.use(u,{allowInlineWithSpace:a,delimiters:r,mathFence:e,render:(s,h,k)=>{const c={strict:(w,g,x)=>m(w,g,x,k)??"ignore",macros:d,throwOnError:!1,...f};return h?S(s,c,i):y(s,c,i)}})};export{$ as katex};
//# sourceMappingURL=index.js.map
